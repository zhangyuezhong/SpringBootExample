<!DOCTYPE html>
<html>
<head>
<script src="/js/streamdataio/streamdataio.js"></script>
</head>
<body>

	<h1>Getting server updates</h1>
	<div id="result"></div>
	<script>
		var myEventSource = null;
		function start() {
			Logger.setLevel(Logger.INFO);
			myEventSource = streamdataio.createEventSource(
					"http://localhost:8080/api/callevents/6025/yzyahaiffa",
					"YYYYYYY");
			myEventSource.onData(function(data) {
				Logger.info("onData={0}", data)
				// initialize your data with the initial snapshot
			}).onPatch(function(data) {
				Logger.info("onPatch={0}", data)
			}).onError(function(error) {
				// do whatever you need in case of error
				Logger.info("onError={0}", error)
			}).onOpen(function() {
				// you can also add custom behavior when the stream is opened
				Logger.info("onOpen Connection is opened")
			});
			myEventSource.open();
		}
		function disconnect() {
			if (myEventSource) {
				myEventSource.close();
				myEventSource = null;
			}
		};
	</script>

	<button onclick="start()">Start</button>
	<button onclick="disconnect()">Stop</button>
</body>
</html>
